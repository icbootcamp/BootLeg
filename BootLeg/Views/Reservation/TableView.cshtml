
@{
    ViewBag.Title = "TableView";
}
<script src="~/Scripts/jquery-1.10.2.js"></script>
<div id="list-inject">
    <h1>1324567890</h1>
</div>
<h1>13245678912313120</h1>
<body onload="TableListLoad()">

</body>
    <script>
    function TableListLoad()
    {
    $.ajax(
            {
                url: '/Reservation/TableList',
                type: 'get',
                success: function (result)
                {

                    $("#list-inject").html(result);
                    $(".remove-table-button").click
                    (
                        function ()
                        {
                            var thisId = $(this).parents("tr").find("#dataid").text();
                            alert(thisId);
                            $.ajax(
                                    {
                                        url: '/Reservation/TableRemove',
                                        type: 'post',
                                        data: { Id: thisId },
                                        success: function(result)
                                        {
                                            TableListLoad()
                                        }
                                    }
                                )
                        }
                    )

                    $(".add-table-button").click
                    (
                        function ()
                        {
                            var tId = 0;
                            //alert(tId);
                            $.ajax(
                                   {
                                       url: '/Reservation/TableEntryView',
                                       type: 'post',
                                       data: { Idd: tId },
                                       success: function (result) {
                                           //console.log(Idd);
                                           PopShow(result, "Add", "Add New Table");
                                           $(".save-changes-btn").click
                                            (                                                
                                                SaveUpdateBtnClick()
                                            )
                                       }
                                   }
                               )
                           
                        }
                    )
                    $(".edit-table-button").click
                    (
                        function ()
                        {
                            var selectId = $(this).parents("tr").find("#dataid").text();
                            $.ajax(
                                    {
                                        url: '/Reservation/TableEntryView',
                                        type: 'post',
                                        data: { Idd: selectId },
                                        success: function (result)
                                        {
                                            console.log(result);
                                            PopShow(result, "Update", "Update New Table");
                                            $(".save-changes-btn").click
                                           (
                                                SaveUpdateBtnClick()
                                           )
                                        }

                                    }
                                )
                        }
                    )


                    function SaveUpdateBtnClick()
                    {
                            var x = $("#edit-student-form").serialize();
                            $.ajax(
                                    {
                                        url: '/Reservation/TableEntied',
                                        type: 'post',
                                        data: x ,
                                        success: function (result) {
                                                                  

                                            $(".modal-title").val("");
                                            $("#Pop-model").modal("hide");
                                            TableListLoad();
                                        }
                                    }
                                )
                    }
                    function PopShow(result, saveText, modalText)
                    {
                        $("#edit-student-form").html(result);

                        $(".close-btn").html("Cancel");
                        $(".save-changes-btn").html(saveText);

                        $(".modal-title").text(modalText);
                        $("#Pop-model").modal("show");
                    }
                }
            }
        )
    }
    </script>
